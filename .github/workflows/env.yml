

name: test-input

on:
  workflow_dispatch:
    inputs:
      branch:
        description: "分支名"
        required: true
      logLevel:
        description: 'Log level'
        required: true
        default: 'warning'
        type: choice
        options:
        - info
        - warning
        - debug
      tags:
        description: 'Test scenario tags'
        required: false
        type: boolean
      environment:
        description: 'Environment to run tests against'
        type: environment
        required: true
      password:
        description: 'Password for the environment'
        required: true
        type: string
      
env:
  HISTORY_COMPONENT_NAME: ones-com
  REAL_COMPONENT_NAME: ${{ github.event.repository.name }}
  OWNER_IN_LOWER: bangwork
  BRANCH_HOHO: ${{ github.event.inputs.branch }}

jobs:
  ci:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Source Code
        uses: actions/checkout@v3

      - name: SetUp Node
        uses: actions/setup-node@v3
        with:
          node-version: "16.x"

      - name: SetUp REAL_COMPONENT_NAME
        if: ${{ env.HISTORY_COMPONENT_NAME != '' }}
        run: echo "REAL_COMPONENT_NAME=${HISTORY_COMPONENT_NAME}" > ${GITHUB_ENV}

      - name: Echo
        run : |
          echo ${{ env.REAL_COMPONENT_NAME }}
          node Github-Env/index.js
