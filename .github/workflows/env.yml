

name: test-input

on:
  workflow_dispatch:
    inputs:
      branch:
        description: "分支名"
        required: true
      links:
        description: '测试页面，不同的链接用逗号隔开，只用输入相对链接，比如 /products/project'
        required: true
      lighthouse:
        description: '跑lighthouse'
        required: false
        type: boolean
      sitespeed:
        description: '跑sitespeed'
        required: false
        default: false
        type: boolean
      counts:
        description: '跑多少次'
        required: true
        type: number
      
env:
  HISTORY_COMPONENT_NAME: ones-com
  REAL_COMPONENT_NAME: ${{ github.event.repository.name }}
  OWNER_IN_LOWER: bangwork
  BRANCH_HOHO: ${{ github.event.inputs.branch }}

jobs:
  ci:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Source Code
        uses: actions/checkout@v3

      - name: SetUp Node
        uses: actions/setup-node@v3
        with:
          node-version: "16.x"

      - name: SetUp REAL_COMPONENT_NAME
        if: ${{ env.HISTORY_COMPONENT_NAME != '' }}
        run: echo "REAL_COMPONENT_NAME=${HISTORY_COMPONENT_NAME}" > ${GITHUB_ENV}

      - name: Echo
        run : |
          echo ${{ env.REAL_COMPONENT_NAME }}
          node Github-Env/index.js
